@using CourseWorkWeb.DAL.Context
@using CourseWorkWeb.DAL.Repositories
@using CourseWorkWeb.Models.Entity.Medicines
@using Microsoft.AspNetCore.Mvc.Routing
@model IEnumerable<Medicine>

@{
    ViewData["Title"] = "Crud";
    
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>
    <link rel="shortcut icon" type="image/ico" href="~/image/icon.ico" />
    <link rel="stylesheet" type="text/css" href="~/css/cite1.css" />
    <link rel="stylesheet" type="text/css" href="~/css/crud.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body class="Cmain">
    <div class="CHeader">
        <div class="CNT">
            <div class="Clogo">
                <img class="CimgLogo"  src="~/image/logo.png">
                <div class="CAptecaName">
                <p>Tabletki</p>
                <p>APT.UA</p>
            </div>
            </div>
            <form class="CSearchField">
                <button class="CCatalog">
                    <img src="~/image/lines.png">
                    <p>Catologe</p>
                    
                </button>
                <div class="CInputBorder">
                    <input type="text" placeholder="Searching...">
                    <button class="CSerch" ><img src="~/image/search.png"></button>
                </div>
            </form>
            <div class="CHelpField">
            <button class="CHelpFieldButton"> <img src="~/image/mag.png"></button>
            <button class="CHelpFieldButton"> <img src="~/image/person.png"></button>
            <button class="CHelpFieldButton"> <img src="~/image/phone.png"></button>
        </div>
        </div>
        <div class="CND">
        <button onclick="toCategory('Medicine')">
            <p>Medicine</p>
            <img src="~/image/pill.svg" alt="Medicine">
        </button>
        <button  onclick="toCategory('Vitamins')">
            <p>Vitamins</p>
            <img src="~/image/mpills.svg" alt="Vitamins">
        </button>
        <button onclick="toCategory('Hygiene')">
            <p>Hygiene</p>
            <img src="~/image/hygiene.svg" alt="Hygiene">
        </button>
        <button onclick="toCategory('Makeup')">
            <p>Makeup</p>
            <img src="~/image/makeup.svg" alt="Makeup">
        </button>
        <button onclick="toCategory('Children')">
            <p>For Children's</p>
            <img src="~/image/toy.svg" alt="For Children's">
        </button>
         <button onclick="toHome()">
            <p>Back</p>
            <img src="~/image/close.png" alt="Back">
        </button>
    </div>
    </div>
    
       <div class="HConteiner" >
        <div class="HHeder" method="post">
            <form class="HelperHeder">
               <div class="BorderSearching">
                <button class="SearchButton" type="button" onclick="Search()">
                    <img src="~/image/searchwhite.png">
                </button>
            </div> 
            <input  class="SerchingInput" type="text" name="Search" placeholder="Searching..."> 
            </form>
            <button action="@Url.Action("Index", "CreatePage")" x" class="ADDButton"><img src="~/image/add.png"></button>
        </div>
        <!--Начало таблици-->
        <table class="Table">
    <thead>
        <tr class="TableTr"> 
            <th class="TableTh">ID</th>
            <th class="TableTh">Name</th>
            <th class="TableTh">Quantity</th>
            <th class="TableTh">Price</th>
            <th class="TableTh">OP</th>
        </tr>
    </thead>
      <!--Елементи таблици-->
            <tbody class="TableTd">
                @if (Model != null)
                {
                    foreach (var item in Model.ToList())
                    {
                        <tr class="TableTrB">
                            <td class="TableTh"><p>@item.Id</p></td>
                            <td class="TableTh"><p>@item.Name</p></td>
                            <td class="TableTh"><p>@item.Quantity</p></td>
                            <td class="TableTh"><p>@item.Cost</p></td>
                            <td class="TableThG">
                                <form method="post" action="@Url.Action("Index", "Update")">
                                    <input type="hidden" name="Id" value="@item.Id" />
                                    <button type="submit" class="TableThBut"><img src="~/image/update.png" /></button>
                                </form>
								<form asp-action="DeleteMedicine" asp-controller="Medicine" method="POST">
                                    <input type="hidden" name="Id" value="@item.Id" />
                                    <button type="submit" class="TableThBut"><img src="~/image/closered.png" /></button>
                                </form>
                            </td>
                        </tr>
                    }
                }
            </tbody>
</table>
       </div> 
   

   
    <script>
    function toHome() {
       $.ajax({
        type: "POST",
        url: "/Catalog/Index",
        success: function (response) {
            console.log("Метод контроллера успешно вызван");
            window.location.href = "/"; 
        },
        error: function (xhr, status, error) {
            console.error("Произошла ошибка при вызове метода контроллера:", error);
        }
    });
}
function toCategory(word) {
    $.ajax({
        type: "POST",
        url: "/Category/Index",
        data: { word: word }, // Pass the 'word' parameter to the controller
        success: function (response) {
            console.log("Метод контроллера успешно вызван");
            window.location.href = "/Category/Index?word=" + word; // Redirect to the category page with the word parameter
        },
        error: function (xhr, status, error) {
            console.error("Произошла ошибка при вызове метода контроллера:", error);
        }
    });
}
 var header = document.querySelector('.HHeder');

    // Добавляем обработчик события прокрутки
    window.addEventListener('scroll', function() {
        // Если страница прокручена больше, чем на 100px, добавляем класс для изменения обводки
        if (window.scrollY > 50) {
            header.classList.add('scrolled-border');
            header.classList.remove('standard-border');
        } else {
            // В противном случае удаляем класс
            header.classList.remove('scrolled-border');
            header.classList.add('standard-border');
        }
    });
</script>
</body>
</html>